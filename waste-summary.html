<section class="summary">
  <h2 style="text-align: center;">üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡∏¢‡∏∞‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</h2>
  <p style="text-align: center; font-style: italic; color: #555;">
    ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏∞‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•‡∏ï‡∏≥‡∏ö‡∏•‡∏ó‡∏≤‡∏™‡∏ö‡πÄ‡∏™‡πâ‡∏≤
  </p>

  <table id="wasteTable" border="1" cellpadding="8" cellspacing="0" style="margin: 20px auto; width: 90%; text-align: center;">
    <thead style="background-color: #e0f7fa;">
      <tr>
        <th>‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</th>
        <th>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡∏¢‡∏∞‡∏£‡∏ß‡∏° (‡∏ï‡∏±‡∏ô)</th>
        <th>‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ï‡∏±‡∏ô)</th>
        <th>‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)</th>
        <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>2566</td>
        <td>594.615</td>
        <td>49.55</td>
        <td>1,200,671.83</td>
        <td>‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° 2,033.17 ‡∏ö‡∏≤‡∏ó</td>
      </tr>
      <tr>
        <td>2567</td>
        <td>656.520</td>
        <td>54.71</td>
        <td>1,296,674.35</td>
        <td>‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° 2,033.17 ‡∏ö‡∏≤‡∏ó</td>
      </tr>
      <tr>
        <td>2568</td>
        <td>660.265</td>
        <td>55.02</td>
        <td>1,350,614.95</td>
        <td>‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° 2,100 ‡∏ö‡∏≤‡∏ó</td>
      </tr>
    </tbody>
  </table>

  <div style="text-align: center; margin-top: 20px;">
    <button onclick="downloadCSV()">üì• ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV</button>
    <button onclick="downloadPDF()">üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF</button>
    <a href="index.html"><button>üîô ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button></a>
  </div>
</section>

<section class="chart" style="margin-top: 50px;">
  <h2 style="text-align: center;">üìä ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</h2>
  <div style="max-width: 600px; margin: auto;">
    <canvas id="budgetChart"></canvas>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  function downloadCSV() {
    const rows = Array.from(document.querySelectorAll("#wasteTable tr"));
    const csv = rows.map(row =>
      Array.from(row.children).map(cell => `"${cell.innerText}"`).join(",")
    ).join("\n");

    const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "waste_summary.csv";
    link.click();
  }

  function downloadPDF() {
    const table = document.getElementById("wasteTable");
    const win = window.open("", "", "width=800,height=600");
    win.document.write("<html><head><title>‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞</title></head><body>");
    win.document.write("<h2>‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡∏¢‡∏∞‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</h2>");
    win.document.write(table.outerHTML);
    win.document.write("</body></html>");
    win.document.close();
    win.print();
  }

  const ctx = document.getElementById('budgetChart').getContext('2d');
  const budgetChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['2566', '2567', '2568'],
      datasets: [{
        label: '‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)',
        data: [1200671.83, 1296674.35, 1350614.95],
        backgroundColor: ['#4caf50', '#2196f3', '#f44336']
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false,
          title: {
            display: true,
            text: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)'
          }
        }
      }
    }
  });
</script>
